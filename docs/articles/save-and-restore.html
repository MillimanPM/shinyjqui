<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Save and restore â€¢ shinyjqui</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Save and restore">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">shinyjqui</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.3.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introduction.html">Introduction to shinyjqui</a>
    </li>
    <li>
      <a href="../articles/orderInput.html">The orderInput</a>
    </li>
    <li>
      <a href="../articles/save-and-restore.html">Save and restore</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/yang-tang/shinyjqui">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Save and restore</h1>
                        <h4 class="author">Yang Tang</h4>
            
            <h4 class="date">2020-02-04</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/yang-tang/shinyjqui/blob/master/vignettes/save-and-restore.Rmd"><code>vignettes/save-and-restore.Rmd</code></a></small>
      <div class="hidden name"><code>save-and-restore.Rmd</code></div>

    </div>

    
    
<p>This vignette introduce the save and restore feature of mouse-interactions in <code>shinyjqui</code> package.</p>
<div id="what-can-be-save-and-restored" class="section level2">
<h2 class="hasAnchor">
<a href="#what-can-be-save-and-restored" class="anchor"></a>What can be save and restored?</h2>
<p>The mouse interactions provide ways to manipulate the state of shiny html elements (listed below) through clicking or dragging.</p>
<table class="table">
<thead><tr class="header">
<th align="left">Interactions</th>
<th align="left">State</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">draggable</td>
<td align="left">The position of the draggable element</td>
</tr>
<tr class="even">
<td align="left">resizable</td>
<td align="left">The dimension of the resizable element</td>
</tr>
<tr class="odd">
<td align="left">selectable</td>
<td align="left">The selected items inside the selectable element</td>
</tr>
<tr class="even">
<td align="left">sortable</td>
<td align="left">The order of items inside the sortable element</td>
</tr>
</tbody>
</table>
<p>These interaction states can be saved and restored in the following two ways.</p>
</div>
<div id="save-and-restore-within-a-shiny-session-client-side" class="section level2">
<h2 class="hasAnchor">
<a href="#save-and-restore-within-a-shiny-session-client-side" class="anchor"></a>Save and restore within a shiny session (client-side)</h2>
<p>This is the case when users want to temporarily save the current interaction state (e.g., position of element) and restore it after mouse operations without closing the shiny app or reloading the page. The <code>save</code> and <code>load</code> operations from the corresponding interaction functions can serve the purpose:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="kw">actionButton</span>(<span class="st">"save"</span>, <span class="st">"Save position"</span>),</a>
<a class="sourceLine" id="cb1-3" title="3">  <span class="kw">actionButton</span>(<span class="st">"restore"</span>, <span class="st">"Restore position"</span>),</a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="co"># create a draggable textInput</span></a>
<a class="sourceLine" id="cb1-5" title="5">  <span class="kw"><a href="../reference/Interactions.html">jqui_draggable</a></span>(<span class="kw">textInput</span>(<span class="st">"foo"</span>, <span class="st">"Textinput"</span>))</a>
<a class="sourceLine" id="cb1-6" title="6">)</a>
<a class="sourceLine" id="cb1-7" title="7"></a>
<a class="sourceLine" id="cb1-8" title="8">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output) {</a>
<a class="sourceLine" id="cb1-9" title="9">  <span class="co"># on save button clicked, save the current postion of the textInput</span></a>
<a class="sourceLine" id="cb1-10" title="10">  <span class="kw">observeEvent</span>(input<span class="op">$</span>save, {</a>
<a class="sourceLine" id="cb1-11" title="11">    <span class="kw"><a href="../reference/Interactions.html">jqui_draggable</a></span>(<span class="st">"#foo"</span>, <span class="dt">operation =</span> <span class="st">"save"</span>)</a>
<a class="sourceLine" id="cb1-12" title="12">  })</a>
<a class="sourceLine" id="cb1-13" title="13">  <span class="co"># on restore button clicked, move the textInput back to the last saved position</span></a>
<a class="sourceLine" id="cb1-14" title="14">  <span class="kw">observeEvent</span>(input<span class="op">$</span>restore, {</a>
<a class="sourceLine" id="cb1-15" title="15">    <span class="kw"><a href="../reference/Interactions.html">jqui_draggable</a></span>(<span class="st">"#foo"</span>, <span class="dt">operation =</span> <span class="st">"load"</span>)</a>
<a class="sourceLine" id="cb1-16" title="16">  })</a>
<a class="sourceLine" id="cb1-17" title="17">}</a>
<a class="sourceLine" id="cb1-18" title="18"></a>
<a class="sourceLine" id="cb1-19" title="19"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
<p>This method also applies to interaction shortcuts like <code><a href="../reference/orderInput.html">orderInput()</a></code>, <code><a href="../reference/selectableTableOutput.html">selectableTableOutput()</a></code> and <code><a href="../reference/sortableTabsetPanel.html">sortableTabsetPanel()</a></code>. For example,</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="kw">actionButton</span>(<span class="st">"save"</span>, <span class="st">"Save order"</span>),</a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="kw">actionButton</span>(<span class="st">"restore"</span>, <span class="st">"Restore order"</span>),</a>
<a class="sourceLine" id="cb2-4" title="4">  <span class="kw"><a href="../reference/orderInput.html">orderInput</a></span>(<span class="st">"foo1"</span>, <span class="dt">label =</span> <span class="ot">NULL</span>, <span class="dt">items =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">connect =</span> <span class="st">"foo2"</span>),</a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="kw"><a href="../reference/orderInput.html">orderInput</a></span>(<span class="st">"foo2"</span>, <span class="dt">label =</span> <span class="ot">NULL</span>, <span class="dt">items =</span> <span class="ot">NULL</span>, <span class="dt">placeholder =</span> <span class="st">"empty"</span>)</a>
<a class="sourceLine" id="cb2-6" title="6">)</a>
<a class="sourceLine" id="cb2-7" title="7"></a>
<a class="sourceLine" id="cb2-8" title="8">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output) {</a>
<a class="sourceLine" id="cb2-9" title="9">  <span class="kw">observeEvent</span>(input<span class="op">$</span>save, {</a>
<a class="sourceLine" id="cb2-10" title="10">    <span class="kw"><a href="../reference/Interactions.html">jqui_sortable</a></span>(<span class="st">"#foo1,#foo2"</span>, <span class="dt">operation =</span> <span class="st">"save"</span>)</a>
<a class="sourceLine" id="cb2-11" title="11">  })</a>
<a class="sourceLine" id="cb2-12" title="12">  <span class="kw">observeEvent</span>(input<span class="op">$</span>restore, {</a>
<a class="sourceLine" id="cb2-13" title="13">    <span class="kw"><a href="../reference/Interactions.html">jqui_sortable</a></span>(<span class="st">"#foo1,#foo2"</span>, <span class="dt">operation =</span> <span class="st">"load"</span>)</a>
<a class="sourceLine" id="cb2-14" title="14">  })</a>
<a class="sourceLine" id="cb2-15" title="15">}</a>
<a class="sourceLine" id="cb2-16" title="16"></a>
<a class="sourceLine" id="cb2-17" title="17"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
</div>
<div id="save-and-restore-cross-shiny-sessions-shiny-bookmarking" class="section level2">
<h2 class="hasAnchor">
<a href="#save-and-restore-cross-shiny-sessions-shiny-bookmarking" class="anchor"></a>Save and restore cross shiny sessions (shiny bookmarking)</h2>
<p>In addition to the client-side mode, cross-session save/restore is also supported, which takes advantage of <a href="https://shiny.rstudio.com/articles/bookmarking-state.html">shiny bookmarking</a>. In this case, users can save the interaction state alone with other shiny input values either by URL-encoding or by save-to-server, and restore them in a different shiny session. All the operations are the same as the native shiny bookmarking except adding a <code><a href="../reference/jqui_bookmarking.html">jqui_bookmarking()</a></code> call in server like this:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"></a>
<a class="sourceLine" id="cb3-2" title="2">ui &lt;-<span class="st"> </span><span class="cf">function</span>(request) {</a>
<a class="sourceLine" id="cb3-3" title="3">  <span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb3-4" title="4">    <span class="kw">bookmarkButton</span>(),</a>
<a class="sourceLine" id="cb3-5" title="5">    <span class="kw"><a href="../reference/Interactions.html">jqui_resizable</a></span>(<span class="kw">plotOutput</span>(<span class="st">'gg'</span>, <span class="dt">width =</span> <span class="st">'200px'</span>, <span class="dt">height =</span> <span class="st">'200px'</span>))</a>
<a class="sourceLine" id="cb3-6" title="6">  )</a>
<a class="sourceLine" id="cb3-7" title="7">}</a>
<a class="sourceLine" id="cb3-8" title="8"></a>
<a class="sourceLine" id="cb3-9" title="9">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output) {</a>
<a class="sourceLine" id="cb3-10" title="10">  output<span class="op">$</span>gg &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({</a>
<a class="sourceLine" id="cb3-11" title="11">    <span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(<span class="dt">x =</span> cyl, <span class="dt">y =</span> mpg)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb3-12" title="12">  })</a>
<a class="sourceLine" id="cb3-13" title="13">  <span class="co"># enable interaction state bookmarking</span></a>
<a class="sourceLine" id="cb3-14" title="14">  <span class="kw"><a href="../reference/jqui_bookmarking.html">jqui_bookmarking</a></span>()</a>
<a class="sourceLine" id="cb3-15" title="15">}</a>
<a class="sourceLine" id="cb3-16" title="16"></a>
<a class="sourceLine" id="cb3-17" title="17"><span class="kw">enableBookmarking</span>(<span class="dt">store =</span> <span class="st">"url"</span>)</a>
<a class="sourceLine" id="cb3-18" title="18"></a>
<a class="sourceLine" id="cb3-19" title="19"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#what-can-be-save-and-restored">What can be save and restored?</a></li>
      <li><a href="#save-and-restore-within-a-shiny-session-client-side">Save and restore within a shiny session (client-side)</a></li>
      <li><a href="#save-and-restore-cross-shiny-sessions-shiny-bookmarking">Save and restore cross shiny sessions (shiny bookmarking)</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Yang Tang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
